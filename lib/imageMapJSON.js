'use strict';

var necessary = require('necessary');

var namesUtilities = require('./utilities/names');

var fileSystemUtilities = necessary.fileSystemUtilities,
    readDirectory = fileSystemUtilities.readDirectory,
    removeHiddenNames = namesUtilities.removeHiddenNames,
    dimensionFromNames = namesUtilities.dimensionFromNames;


function imageMapJSON(imageDirectoryPath, callback) {
  var names = readDirectory(imageDirectoryPath);

  names = removeHiddenNames(names);

  var dimension = dimensionFromNames(names),
      imageMapJSON = names.reduce(function (imageMapJSON, name, index) {
    var left = index % dimension / dimension,
        bottom = Math.floor(index / dimension) / dimension,
        width = 1 / dimension,
        height = 1 / dimension;

    imageMapJSON[name] = {
      left: left,
      bottom: bottom,
      width: width,
      height: height
    };

    return imageMapJSON;
  }, {});

  callback(imageMapJSON);
}

module.exports = imageMapJSON;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9pbWFnZU1hcEpTT04uanMiXSwibmFtZXMiOlsibmVjZXNzYXJ5IiwicmVxdWlyZSIsIm5hbWVzVXRpbGl0aWVzIiwiZmlsZVN5c3RlbVV0aWxpdGllcyIsInJlYWREaXJlY3RvcnkiLCJyZW1vdmVIaWRkZW5OYW1lcyIsImRpbWVuc2lvbkZyb21OYW1lcyIsImltYWdlTWFwSlNPTiIsImltYWdlRGlyZWN0b3J5UGF0aCIsImNhbGxiYWNrIiwibmFtZXMiLCJkaW1lbnNpb24iLCJyZWR1Y2UiLCJuYW1lIiwiaW5kZXgiLCJsZWZ0IiwiYm90dG9tIiwiTWF0aCIsImZsb29yIiwid2lkdGgiLCJoZWlnaHQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxZQUFZQyxRQUFRLFdBQVIsQ0FBbEI7O0FBRUEsSUFBTUMsaUJBQWlCRCxRQUFRLG1CQUFSLENBQXZCOztBQUVNLElBQUVFLG1CQUFGLEdBQTBCSCxTQUExQixDQUFFRyxtQkFBRjtBQUFBLElBQ0VDLGFBREYsR0FDb0JELG1CQURwQixDQUNFQyxhQURGO0FBQUEsSUFFRUMsaUJBRkYsR0FFNENILGNBRjVDLENBRUVHLGlCQUZGO0FBQUEsSUFFcUJDLGtCQUZyQixHQUU0Q0osY0FGNUMsQ0FFcUJJLGtCQUZyQjs7O0FBSU4sU0FBU0MsWUFBVCxDQUFzQkMsa0JBQXRCLEVBQTBDQyxRQUExQyxFQUFvRDtBQUNuRCxNQUFJQyxRQUFRTixjQUFjSSxrQkFBZCxDQUFaOztBQUVBRSxVQUFRTCxrQkFBa0JLLEtBQWxCLENBQVI7O0FBRUEsTUFBTUMsWUFBWUwsbUJBQW1CSSxLQUFuQixDQUFsQjtBQUFBLE1BQ09ILGVBQWVHLE1BQU1FLE1BQU4sQ0FBYSxVQUFTTCxZQUFULEVBQXVCTSxJQUF2QixFQUE2QkMsS0FBN0IsRUFBb0M7QUFDOUQsUUFBTUMsT0FBUUQsUUFBUUgsU0FBVCxHQUFzQkEsU0FBbkM7QUFBQSxRQUNNSyxTQUFTQyxLQUFLQyxLQUFMLENBQVdKLFFBQVFILFNBQW5CLElBQWdDQSxTQUQvQztBQUFBLFFBRU1RLFFBQVEsSUFBSVIsU0FGbEI7QUFBQSxRQUdNUyxTQUFTLElBQUlULFNBSG5COztBQUtBSixpQkFBYU0sSUFBYixJQUFxQjtBQUNuQkUsWUFBTUEsSUFEYTtBQUVuQkMsY0FBUUEsTUFGVztBQUduQkcsYUFBT0EsS0FIWTtBQUluQkMsY0FBUUE7QUFKVyxLQUFyQjs7QUFPQSxXQUFPYixZQUFQO0FBQ0QsR0FkYyxFQWNaLEVBZFksQ0FEdEI7O0FBaUJDRSxXQUFTRixZQUFUO0FBQ0Q7O0FBRURjLE9BQU9DLE9BQVAsR0FBaUJmLFlBQWpCIiwiZmlsZSI6ImltYWdlTWFwSlNPTi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgbmVjZXNzYXJ5ID0gcmVxdWlyZSgnbmVjZXNzYXJ5Jyk7XG5cbmNvbnN0IG5hbWVzVXRpbGl0aWVzID0gcmVxdWlyZSgnLi91dGlsaXRpZXMvbmFtZXMnKTtcblxuY29uc3QgeyBmaWxlU3lzdGVtVXRpbGl0aWVzIH0gPSBuZWNlc3NhcnksXG4gICAgICB7IHJlYWREaXJlY3RvcnkgfSA9IGZpbGVTeXN0ZW1VdGlsaXRpZXMsXG4gICAgICB7IHJlbW92ZUhpZGRlbk5hbWVzLCBkaW1lbnNpb25Gcm9tTmFtZXMgfSA9IG5hbWVzVXRpbGl0aWVzO1xuXG5mdW5jdGlvbiBpbWFnZU1hcEpTT04oaW1hZ2VEaXJlY3RvcnlQYXRoLCBjYWxsYmFjaykge1xuXHRsZXQgbmFtZXMgPSByZWFkRGlyZWN0b3J5KGltYWdlRGlyZWN0b3J5UGF0aCk7XG5cblx0bmFtZXMgPSByZW1vdmVIaWRkZW5OYW1lcyhuYW1lcyk7XG5cblx0Y29uc3QgZGltZW5zaW9uID0gZGltZW5zaW9uRnJvbU5hbWVzKG5hbWVzKSxcbiAgICAgICAgaW1hZ2VNYXBKU09OID0gbmFtZXMucmVkdWNlKGZ1bmN0aW9uKGltYWdlTWFwSlNPTiwgbmFtZSwgaW5kZXgpIHtcbiAgICAgICAgICBjb25zdCBsZWZ0ID0gKGluZGV4ICUgZGltZW5zaW9uKSAvIGRpbWVuc2lvbixcbiAgICAgICAgICAgICAgICBib3R0b20gPSBNYXRoLmZsb29yKGluZGV4IC8gZGltZW5zaW9uKSAvIGRpbWVuc2lvbixcbiAgICAgICAgICAgICAgICB3aWR0aCA9IDEgLyBkaW1lbnNpb24sXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gMSAvIGRpbWVuc2lvbjtcblxuICAgICAgICAgIGltYWdlTWFwSlNPTltuYW1lXSA9IHtcbiAgICAgICAgICAgIGxlZnQ6IGxlZnQsXG4gICAgICAgICAgICBib3R0b206IGJvdHRvbSxcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHJldHVybiBpbWFnZU1hcEpTT047XG4gICAgICAgIH0sIHt9KTtcbiAgICAgICAgXG4gIGNhbGxiYWNrKGltYWdlTWFwSlNPTik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW1hZ2VNYXBKU09OO1xuIl19