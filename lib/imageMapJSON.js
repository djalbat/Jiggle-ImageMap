'use strict';

var necessary = require('necessary');

var namesUtilities = require('./utilities/names');

var fileSystemUtilities = necessary.fileSystemUtilities,
    readDirectory = fileSystemUtilities.readDirectory,
    removeHiddenNames = namesUtilities.removeHiddenNames,
    dimensionFromNames = namesUtilities.dimensionFromNames;


function imageMapJSON(names, imageDirectoryPath, callback) {
  var namesLength = names.length;

  if (namesLength === 0) {
    names = readDirectory(imageDirectoryPath);
  }

  names = removeHiddenNames(names);

  var dimension = dimensionFromNames(names),
      imageMapJSON = names.reduce(function (imageMapJSON, name, index) {
    var left = index % dimension / dimension,
        bottom = Math.floor(index / dimension) / dimension,
        width = 1 / dimension,
        height = 1 / dimension;

    imageMapJSON[name] = {
      left: left,
      bottom: bottom,
      width: width,
      height: height
    };

    return imageMapJSON;
  }, {});

  callback(imageMapJSON);
}

module.exports = imageMapJSON;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9pbWFnZU1hcEpTT04uanMiXSwibmFtZXMiOlsibmVjZXNzYXJ5IiwicmVxdWlyZSIsIm5hbWVzVXRpbGl0aWVzIiwiZmlsZVN5c3RlbVV0aWxpdGllcyIsInJlYWREaXJlY3RvcnkiLCJyZW1vdmVIaWRkZW5OYW1lcyIsImRpbWVuc2lvbkZyb21OYW1lcyIsImltYWdlTWFwSlNPTiIsIm5hbWVzIiwiaW1hZ2VEaXJlY3RvcnlQYXRoIiwiY2FsbGJhY2siLCJuYW1lc0xlbmd0aCIsImxlbmd0aCIsImRpbWVuc2lvbiIsInJlZHVjZSIsIm5hbWUiLCJpbmRleCIsImxlZnQiLCJib3R0b20iLCJNYXRoIiwiZmxvb3IiLCJ3aWR0aCIsImhlaWdodCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLFlBQVlDLFFBQVEsV0FBUixDQUFsQjs7QUFFQSxJQUFNQyxpQkFBaUJELFFBQVEsbUJBQVIsQ0FBdkI7O0FBRU0sSUFBRUUsbUJBQUYsR0FBMEJILFNBQTFCLENBQUVHLG1CQUFGO0FBQUEsSUFDRUMsYUFERixHQUNvQkQsbUJBRHBCLENBQ0VDLGFBREY7QUFBQSxJQUVFQyxpQkFGRixHQUU0Q0gsY0FGNUMsQ0FFRUcsaUJBRkY7QUFBQSxJQUVxQkMsa0JBRnJCLEdBRTRDSixjQUY1QyxDQUVxQkksa0JBRnJCOzs7QUFJTixTQUFTQyxZQUFULENBQXNCQyxLQUF0QixFQUE2QkMsa0JBQTdCLEVBQWlEQyxRQUFqRCxFQUEyRDtBQUMxRCxNQUFNQyxjQUFjSCxNQUFNSSxNQUExQjs7QUFFQSxNQUFJRCxnQkFBZ0IsQ0FBcEIsRUFBdUI7QUFDdEJILFlBQVFKLGNBQWNLLGtCQUFkLENBQVI7QUFDQTs7QUFFREQsVUFBUUgsa0JBQWtCRyxLQUFsQixDQUFSOztBQUVBLE1BQU1LLFlBQVlQLG1CQUFtQkUsS0FBbkIsQ0FBbEI7QUFBQSxNQUNPRCxlQUFlQyxNQUFNTSxNQUFOLENBQWEsVUFBU1AsWUFBVCxFQUF1QlEsSUFBdkIsRUFBNkJDLEtBQTdCLEVBQW9DO0FBQzlELFFBQU1DLE9BQVFELFFBQVFILFNBQVQsR0FBc0JBLFNBQW5DO0FBQUEsUUFDTUssU0FBU0MsS0FBS0MsS0FBTCxDQUFXSixRQUFRSCxTQUFuQixJQUFnQ0EsU0FEL0M7QUFBQSxRQUVNUSxRQUFRLElBQUlSLFNBRmxCO0FBQUEsUUFHTVMsU0FBUyxJQUFJVCxTQUhuQjs7QUFLQU4saUJBQWFRLElBQWIsSUFBcUI7QUFDbkJFLGdCQURtQjtBQUVuQkMsb0JBRm1CO0FBR25CRyxrQkFIbUI7QUFJbkJDO0FBSm1CLEtBQXJCOztBQU9BLFdBQU9mLFlBQVA7QUFDRCxHQWRjLEVBY1osRUFkWSxDQUR0Qjs7QUFpQkNHLFdBQVNILFlBQVQ7QUFDRDs7QUFFRGdCLE9BQU9DLE9BQVAsR0FBaUJqQixZQUFqQiIsImZpbGUiOiJpbWFnZU1hcEpTT04uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IG5lY2Vzc2FyeSA9IHJlcXVpcmUoJ25lY2Vzc2FyeScpO1xuXG5jb25zdCBuYW1lc1V0aWxpdGllcyA9IHJlcXVpcmUoJy4vdXRpbGl0aWVzL25hbWVzJyk7XG5cbmNvbnN0IHsgZmlsZVN5c3RlbVV0aWxpdGllcyB9ID0gbmVjZXNzYXJ5LFxuICAgICAgeyByZWFkRGlyZWN0b3J5IH0gPSBmaWxlU3lzdGVtVXRpbGl0aWVzLFxuICAgICAgeyByZW1vdmVIaWRkZW5OYW1lcywgZGltZW5zaW9uRnJvbU5hbWVzIH0gPSBuYW1lc1V0aWxpdGllcztcblxuZnVuY3Rpb24gaW1hZ2VNYXBKU09OKG5hbWVzLCBpbWFnZURpcmVjdG9yeVBhdGgsIGNhbGxiYWNrKSB7XG5cdGNvbnN0IG5hbWVzTGVuZ3RoID0gbmFtZXMubGVuZ3RoO1xuXG5cdGlmIChuYW1lc0xlbmd0aCA9PT0gMCkge1xuXHRcdG5hbWVzID0gcmVhZERpcmVjdG9yeShpbWFnZURpcmVjdG9yeVBhdGgpO1xuXHR9XG5cblx0bmFtZXMgPSByZW1vdmVIaWRkZW5OYW1lcyhuYW1lcyk7XG5cblx0Y29uc3QgZGltZW5zaW9uID0gZGltZW5zaW9uRnJvbU5hbWVzKG5hbWVzKSxcbiAgICAgICAgaW1hZ2VNYXBKU09OID0gbmFtZXMucmVkdWNlKGZ1bmN0aW9uKGltYWdlTWFwSlNPTiwgbmFtZSwgaW5kZXgpIHtcbiAgICAgICAgICBjb25zdCBsZWZ0ID0gKGluZGV4ICUgZGltZW5zaW9uKSAvIGRpbWVuc2lvbixcbiAgICAgICAgICAgICAgICBib3R0b20gPSBNYXRoLmZsb29yKGluZGV4IC8gZGltZW5zaW9uKSAvIGRpbWVuc2lvbixcbiAgICAgICAgICAgICAgICB3aWR0aCA9IDEgLyBkaW1lbnNpb24sXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gMSAvIGRpbWVuc2lvbjtcblxuICAgICAgICAgIGltYWdlTWFwSlNPTltuYW1lXSA9IHtcbiAgICAgICAgICAgIGxlZnQsXG4gICAgICAgICAgICBib3R0b20sXG4gICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICByZXR1cm4gaW1hZ2VNYXBKU09OO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIFxuICBjYWxsYmFjayhpbWFnZU1hcEpTT04pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGltYWdlTWFwSlNPTjtcbiJdfQ==