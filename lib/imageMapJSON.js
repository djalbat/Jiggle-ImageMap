'use strict';

var necessary = require('necessary');

var namesUtilities = require('./utilities/names');

var fileSystemUtilities = necessary.fileSystemUtilities,
    readDirectory = fileSystemUtilities.readDirectory,
    removeHiddenNames = namesUtilities.removeHiddenNames,
    dimensionFromNames = namesUtilities.dimensionFromNames;


function imageMapJSON(names, imageDirectoryPath, callback) {
  if (!callback) {
    callback = imageDirectoryPath;
    imageDirectoryPath = names;
    names = readDirectory(imageDirectoryPath);
  }

  names = removeHiddenNames(names);

  var dimension = dimensionFromNames(names),
      imageMapJSON = names.reduce(function (imageMapJSON, name, index) {
    var left = index % dimension / dimension,
        bottom = Math.floor(index / dimension) / dimension,
        width = 1 / dimension,
        height = 1 / dimension;

    imageMapJSON[name] = {
      left: left,
      bottom: bottom,
      width: width,
      height: height
    };

    return imageMapJSON;
  }, {});

  callback(imageMapJSON);
}

module.exports = imageMapJSON;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9pbWFnZU1hcEpTT04uanMiXSwibmFtZXMiOlsibmVjZXNzYXJ5IiwicmVxdWlyZSIsIm5hbWVzVXRpbGl0aWVzIiwiZmlsZVN5c3RlbVV0aWxpdGllcyIsInJlYWREaXJlY3RvcnkiLCJyZW1vdmVIaWRkZW5OYW1lcyIsImRpbWVuc2lvbkZyb21OYW1lcyIsImltYWdlTWFwSlNPTiIsIm5hbWVzIiwiaW1hZ2VEaXJlY3RvcnlQYXRoIiwiY2FsbGJhY2siLCJkaW1lbnNpb24iLCJyZWR1Y2UiLCJuYW1lIiwiaW5kZXgiLCJsZWZ0IiwiYm90dG9tIiwiTWF0aCIsImZsb29yIiwid2lkdGgiLCJoZWlnaHQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxZQUFZQyxRQUFRLFdBQVIsQ0FBbEI7O0FBRUEsSUFBTUMsaUJBQWlCRCxRQUFRLG1CQUFSLENBQXZCOztBQUVNLElBQUVFLG1CQUFGLEdBQTBCSCxTQUExQixDQUFFRyxtQkFBRjtBQUFBLElBQ0VDLGFBREYsR0FDb0JELG1CQURwQixDQUNFQyxhQURGO0FBQUEsSUFFRUMsaUJBRkYsR0FFNENILGNBRjVDLENBRUVHLGlCQUZGO0FBQUEsSUFFcUJDLGtCQUZyQixHQUU0Q0osY0FGNUMsQ0FFcUJJLGtCQUZyQjs7O0FBSU4sU0FBU0MsWUFBVCxDQUFzQkMsS0FBdEIsRUFBNkJDLGtCQUE3QixFQUFpREMsUUFBakQsRUFBMkQ7QUFDMUQsTUFBSSxDQUFDQSxRQUFMLEVBQWU7QUFDZEEsZUFBV0Qsa0JBQVg7QUFDQUEseUJBQXFCRCxLQUFyQjtBQUNBQSxZQUFRSixjQUFjSyxrQkFBZCxDQUFSO0FBQ0E7O0FBRURELFVBQVFILGtCQUFrQkcsS0FBbEIsQ0FBUjs7QUFFQSxNQUFNRyxZQUFZTCxtQkFBbUJFLEtBQW5CLENBQWxCO0FBQUEsTUFDT0QsZUFBZUMsTUFBTUksTUFBTixDQUFhLFVBQVNMLFlBQVQsRUFBdUJNLElBQXZCLEVBQTZCQyxLQUE3QixFQUFvQztBQUM5RCxRQUFNQyxPQUFRRCxRQUFRSCxTQUFULEdBQXNCQSxTQUFuQztBQUFBLFFBQ01LLFNBQVNDLEtBQUtDLEtBQUwsQ0FBV0osUUFBUUgsU0FBbkIsSUFBZ0NBLFNBRC9DO0FBQUEsUUFFTVEsUUFBUSxJQUFJUixTQUZsQjtBQUFBLFFBR01TLFNBQVMsSUFBSVQsU0FIbkI7O0FBS0FKLGlCQUFhTSxJQUFiLElBQXFCO0FBQ25CRSxZQUFNQSxJQURhO0FBRW5CQyxjQUFRQSxNQUZXO0FBR25CRyxhQUFPQSxLQUhZO0FBSW5CQyxjQUFRQTtBQUpXLEtBQXJCOztBQU9BLFdBQU9iLFlBQVA7QUFDRCxHQWRjLEVBY1osRUFkWSxDQUR0Qjs7QUFpQkNHLFdBQVNILFlBQVQ7QUFDRDs7QUFFRGMsT0FBT0MsT0FBUCxHQUFpQmYsWUFBakIiLCJmaWxlIjoiaW1hZ2VNYXBKU09OLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBuZWNlc3NhcnkgPSByZXF1aXJlKCduZWNlc3NhcnknKTtcblxuY29uc3QgbmFtZXNVdGlsaXRpZXMgPSByZXF1aXJlKCcuL3V0aWxpdGllcy9uYW1lcycpO1xuXG5jb25zdCB7IGZpbGVTeXN0ZW1VdGlsaXRpZXMgfSA9IG5lY2Vzc2FyeSxcbiAgICAgIHsgcmVhZERpcmVjdG9yeSB9ID0gZmlsZVN5c3RlbVV0aWxpdGllcyxcbiAgICAgIHsgcmVtb3ZlSGlkZGVuTmFtZXMsIGRpbWVuc2lvbkZyb21OYW1lcyB9ID0gbmFtZXNVdGlsaXRpZXM7XG5cbmZ1bmN0aW9uIGltYWdlTWFwSlNPTihuYW1lcywgaW1hZ2VEaXJlY3RvcnlQYXRoLCBjYWxsYmFjaykge1xuXHRpZiAoIWNhbGxiYWNrKSB7XG5cdFx0Y2FsbGJhY2sgPSBpbWFnZURpcmVjdG9yeVBhdGg7XG5cdFx0aW1hZ2VEaXJlY3RvcnlQYXRoID0gbmFtZXM7XG5cdFx0bmFtZXMgPSByZWFkRGlyZWN0b3J5KGltYWdlRGlyZWN0b3J5UGF0aCk7XG5cdH1cblxuXHRuYW1lcyA9IHJlbW92ZUhpZGRlbk5hbWVzKG5hbWVzKTtcblxuXHRjb25zdCBkaW1lbnNpb24gPSBkaW1lbnNpb25Gcm9tTmFtZXMobmFtZXMpLFxuICAgICAgICBpbWFnZU1hcEpTT04gPSBuYW1lcy5yZWR1Y2UoZnVuY3Rpb24oaW1hZ2VNYXBKU09OLCBuYW1lLCBpbmRleCkge1xuICAgICAgICAgIGNvbnN0IGxlZnQgPSAoaW5kZXggJSBkaW1lbnNpb24pIC8gZGltZW5zaW9uLFxuICAgICAgICAgICAgICAgIGJvdHRvbSA9IE1hdGguZmxvb3IoaW5kZXggLyBkaW1lbnNpb24pIC8gZGltZW5zaW9uLFxuICAgICAgICAgICAgICAgIHdpZHRoID0gMSAvIGRpbWVuc2lvbixcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSAxIC8gZGltZW5zaW9uO1xuXG4gICAgICAgICAgaW1hZ2VNYXBKU09OW25hbWVdID0ge1xuICAgICAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgICAgIGJvdHRvbTogYm90dG9tLFxuICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgcmV0dXJuIGltYWdlTWFwSlNPTjtcbiAgICAgICAgfSwge30pO1xuICAgICAgICBcbiAgY2FsbGJhY2soaW1hZ2VNYXBKU09OKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbWFnZU1hcEpTT047XG4iXX0=